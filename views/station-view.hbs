{{> menu}}

<div class="box">
  {{#with station}}
  {{> station-panel}}
  {{/with}}
</div>
<div class="box" id="map"></div>
{{> list-reports}}
{{> add-report}}
{{> generate-report}}

{{#with station}}
<script>
  let map = L.map('map');
  L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
  }).addTo(map);

  let marker;
  let markersGroup = new L.featureGroup();

  marker = L.marker([{{latitude}}, {{longitude}}]);
  marker.bindPopup(`<b>{{title}}</b><br>Lat: {{latitude}}, Long: {{longitude}}`);
  markersGroup.addLayer(marker);

  markersGroup.addTo(map)

  map.fitBounds(markersGroup.getBounds(), {
    maxZoom: 10
  });
</script>
{{/with}}